<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="html 5 template">
  <meta name="author" content="tonytemplates.com">
  <link rel="icon" href="favicon.ico">
  <title>管理个人信息</title>
  <!-- Bootstrap core CSS -->
  <link href="../css/plugins/bootstrap.min.css" rel="stylesheet">
  <link href="../css/plugins/bootstrap-submenu.css" rel="stylesheet">
  <link href="../css/plugins/animate.min.css" rel="stylesheet">
  <link href="../css/plugins/nivo-slider.css" rel="stylesheet">
  <link href="../css/plugins/slick.css" rel="stylesheet">
  <link href="../css/plugins/magnific-popup.css" rel="stylesheet">
  <link href="../css/custom.css" rel="stylesheet">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!-- Icon Font-->
  <link href="../iconfont/style.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,400,500,700,900"
          rel="stylesheet">
  <!-- Google map -->
  <!---<script type="text/javascript" src="http://ditu.google.cn/maps/api/js"></script>--->
</head>

<body class="home">
<!-- Loader -->
<div id="loader-wrapper" class="loader-on">
  <div id="loader">
    <div class="loader">
      <div class="bolt one">
        <div class="other"></div>
      </div>
      <div class="bolt two">
        <div class="other"></div>
      </div>
      <div class="bolt three">
        <div class="other"></div>
      </div>
      加载中
    </div>
  </div>
</div>
<!-- //Loader -->
<!-- Header -->
<header class="page-header">
  <!-- Fixed navbar -->
  <nav class="navbar" id="slide-nav">
    <div class="container">
      <div class="navbar-header">
        <div class="header-top">
          <div class="row">
            <div class="col-sm-4">
              <div class="social-links">
                <ul>
                  <li><a class="icon icon-twitter" href="#"></a></li>
                  <li><a class="icon icon-facebook" href="#"></a></li>
                  <li><a class="icon icon-instagram" href="#"></a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-4 text-center">
              <div class="logo">
                <a href="index.html"><img src="../images/logo.png"
                                          alt="Logo"> <span><img src="../images/bolt.gif"
                                                                 alt=""></span></a>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="phone">
                <div class="number">
                  <i class="icon icon-telephone"></i><span>1 (800)
											765-43-21</span>
                </div>
                <div class="under-number">Call us now. Resistance is
                  futile!</div>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="navbar-toggle">
          <i class="icon icon-interface icon-menu"></i><i
                class="icon icon-cancel"></i>
        </button>
      </div>
      <div id="slidemenu" data-hover="dropdown" data-animations="fadeIn">
        <ul class="nav navbar-nav">
          <!--                    <li ><a href="index.html"><span class="electric-btn"><span class="text">首页</span></span></a></li>-->
          <li class="active"><a href="person.html"><span class="electric-btn"><span class="text">查看用户信息</span></span></a></li>
          <li ><a href="admticket.html"><span class="electric-btn"><span class="text">查看火车票信息</span></span></a></li>
        </ul>
      </div>
      <div id="slidemenu1" data-hover="dropdown" data-animations="fadeIn">
        <ul class="nav navbar-nav">
          <li ><a href="person.html"><span class="electric-btn"><span class="text">查看用户个人信息</span></span></a></li>
          <li ><a href="personOrder.html"><span class="electric-btn"><span class="text">查看用户订单信息</span></span></a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<!-- // Header -->
<!-- Content  -->
<div id="page-content">
  <!-- Breadcrumbs Block -->
  <div class="container">
    <div class="breadcrumbs">
      <ul class="breadcrumb">
        <li><a href="person.html">管理员</a></li>
        <li class="active">用户信息</li>
      </ul>
    </div>
  </div>
  <!-- //Breadcrumbs Block -->
  <!-- Block -->
  <div class="block">
    <div class="container">
      <h1 class="text-center">
        订单 <b>信息</b>
      </h1>
      <p class="font24 text-center">根据用户名查看用户信息</p>
      <form id="queryform" class="contact-form" name="queryform"
            method="post" novalidate>
        <div id="success">
          <p>信息查询成功！</p>
        </div>
        <div id="error">
          <p>信息查询出错！请再次查询！</p>
        </div>
        <div class="inputs-col">
          <div class="row">
            <div class="col-md-6">
              <div class="input-wrapper">
                <label>用户名<span class="required"></span></label> <input
                      type="text" class="input-custom input-full" id="source"
                      placeholder="请输入用户名">
              </div>
            </div>

          </div>

          <button type="submit" id="submit" class="btn btn-border">
<!--            <span>查询</span>-->
            <a class="searche" href="personOrder1.html">查询</a>
          </button>
        </div>
      </form>
  </div>
  <!-- //Block -->
  <div class="block">
    <div class="container">

      <div class="table-wrapper">
        <table id="orderTable" class="table price-table" id="orderTable">
          <tbody>
          <tr class="table-header">
            <th>乘车人</th>
            <th>始发地</th>
            <th>出发时间</th>
            <th>目的地</th>
            <th>到达时间</th>
            <th>班次号</th>
            <th>价格</th>
            <th>订单状态</th>
            <th>操作</th>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- // Content  -->

</div>

  <script src="../js/jquery.js"></script>
  <script src="../js/plugins/bootstrap.min.js"></script>
  <script src="../js/plugins/slick.min.js"></script>
  <script src="../js/plugins/jquery.form.js"></script>
  <script src="../js/plugins/jquery.validate.min.js"></script>
  <script src="../js/custom.js"></script>
<script language="JavaScript">
  fillerIn()
  var json = [];
  var storage = window.localStorage;
  var username = storage["username"];
  // ajax传递数据
  var json = {
    "username" : username
  } // 这里的orderId是指订单id,tripsId是指新车票的id
  // ajax提交数据
  $.ajax({
    type : 'POST',
    url : base_url +'/getorder',
    data : JSON.stringify(json),
    contentType : 'application/json;charset=utf-8',
    dataType : 'json',
    success : function(data) {
      if (data.stateCode === 200) {
        // 订单信息查询成功
        console.log("11")
        console.log(data.data)
        console.log("查询订单信息成功，呈现到订单信息的页面当中");
        //暂时的解决掉数据的参数传递问题
        window.localStorage.setItem("orderItem",JSON.stringify(data.data));
        json = JSON.stringify(data.data)
        // $("#orderTable").html("");
        $("#orderTable").siblings(
                'tr'
        ).remove()



        for (var i= 0;i<data.data.length; i++) {
          var tr;
          tr = '<td>' + data.data[i].trueName + '</td>' + '<td>'
                  + data.data[i].orginLocation + '</td>' + '<td>'
                  + data.data[i].startTime + '</td>' + '<td>'
                  + data.data[i].destinationLocation + '</td>'
                  + '<td>' + data.data[i].reachTime + '</td>'
                  + '<td>' + data.data[i].carNum + '</td>' + '<td>'
                  + data.data[i].ticketPrice + '</td>' + '<td>'
                  + data.data[i].status + '</td>' + '<td>'
                  + '<button onclick="orderDetail(' + i + ')'+'">查看</button>'
                  + '</td>';
          $("#orderTable").append('<tr>' + tr + '</tr>');
        }
      } else
              // 查询失败,错误信息在data.msg里面（未填写个人信息，请完善个人信息）
        alert("错误信息：" + data.msg)

    }
  })

</script>

</body>
</html>
